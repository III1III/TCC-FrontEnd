<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cliente / Registrar</title>
    
    <!-- Favicon ( logo ) -->
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/1806/1806263.png">

    <!-- Arquivos CSS -->
    <link rel="stylesheet" href="../assets/css/normalize.css"> 
    <link rel="stylesheet" href="../assets/css/register/register.css">


    <!-- Bibliotecas -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- JQuery -->

    <!-- Frameworks -->
      <!-- Materialize -->
        <!-- CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <!-- JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- Font Awesome -->
      <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
      <!-- Fontes -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
  
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;800&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Funcionalidades JavaScript -->
    <script src="../components/sidenav.js"></script>
    <script src="../utils/selectAPI.js"></script>
    <script src="../utils/adressFill.js"></script>

</head>
<body>
  <div class="row">
    <nav class="col s12 bg">
        <div class="nav-wrapper">
            <a href="../index.html" class="brand-logo" id="netero">NETERO</a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
            </ul>
        </div>
    </nav>
</div>

<div class="container">
    <h1 id="container" class="page-title">Cadastrar Cliente</h1>

    <div id="container" class="form-container">
        <div id="texto-preto" class="section-title">Foto de Perfil (Opcional)</div>
        <div id="foto" class="profile-photo">
            <img id="perfil-foto">
        </div>
        <input type="file" accept="image/jpeg, image/jpg, image/png" id="input-foto" class="file-input">

        <div class="form-group">
            <label for="nome" class="form__label">Nome Completo:</label>
            <input type="text" id="nome" name="nome" class="form__field" required>
        </div>

        <div class="form-group">
            <label for="cnpj" class="form__label" id="cnpj">CPF:</label>
            <input type="text" id="cnpj" name="cnpj" class="form__field" required>
        </div>

        <div class="form-group">
            <label for="email" class="form__label">Email de Contato:</label>
            <input type="email" id="email" name="email" class="form__field" required>
        </div>

        <div class="form-group">
            <label for="numero" class="form__label">Número de Contato:</label>
            <input type="tel" id="numero" name="numero" class="form__field" pattern="[0-9]+" required>
        </div>

        <div id="senhas-grid" class="password-grid">
            <div class="form-group">
                <label for="senha1" class="form__label">Senha:</label>
                <input type="password" id="senha1" name="senha" class="form__field" required>
            </div>
            <div class="form-group">
                <label for="senha2" class="form__label">Confirmar Senha:</label>
                <input type="password" id="senha2" class="form__field" required>
            </div>
        </div>

        <h2 class="section-title">Endereço</h2>

        <div class="form-group">
            <label for="cep" class="form__label">CEP:</label>
            <input type="text" id="cep" name="cep" class="form__field" pattern="[0-9]+" required>
        </div>

        <div id="cep-grid" class="cep-grid">
            <a href="https://buscacepinter.correios.com.br/app/endereco/index.php" target="_blank" class="cep-link">Buscar CEP</a>
            <button id="autofill-button" class="button">Auto Preencher</button>
        </div>
        <div id="select-grid" class="">
            <div class="form-group">
              UF:&nbsp;
            </div>
            <select style="width: 30%;" class="browser-default my-select" id="slctuf" name="uf" required="required">
              <option value="" disabled="disabled" selected="selected">Estados</option>
            </select>
          </div><br>
          
          <div id="select-grid" class="">
            <div class="form-group">
              Cidade:&nbsp;
            </div>
            <select style="width: 30%; margin-bottom: 30px;" class="browser-default my-select" id="slctcidade" name="cidade" required="required">
              <option value="" disabled="disabled" selected="selected">Cidades</option>
            </select>
          </div>
        

        <div id="endereco-grid" class="address-grid">
            <div class="form-group">
                <label for="logradouro" class="form__label">Logradouro:</label>
                <input type="text" id="logradouro" name="logradouro" class="form__field" required>
            </div>
            <div class="form-group">
                <label for="bairro" class="form__label">Bairro:</label>
                <input type="text" id="bairro" name="bairro" class="form__field" required>
            </div>
            <div class="form-group">
                <label for="numero" class="form__label">Nº:</label>
                <input type="text" id="numero" name="numero" class="form__field" pattern="[0-9]+" required>
            </div>
            <div class="form-group">
                <label for="comp" class="form__label">Complemento:</label>
                <input type="text" id="comp" name="comp" class="form__field">
            </div>
        </div>

        <div class="button-container">
            <button class="button primary-button" onclick="redirecionamento()">Cadastrar</button>
        </div>
    </div>
</div>


<script>
  function redirecionamento(){
          window.location.href = "../dashboard/hirer-mod.html";
      }
  const input = document.getElementById("input-foto");
  const imagem = document.getElementById("perfil-foto");
  
  input.addEventListener("change", function() {
      const file = this.files[0];
      const reader = new FileReader();
      reader.addEventListener("load", function() {
      imagem.setAttribute("src", reader.result);
      });
      reader.readAsDataURL(file);
      });    
      
  
  
  const cpfInput = document.querySelector('input[name="cpf"]');
  const cpfLabel = document.getElementById('cpf');
  
  
  cpfInput.addEventListener('input', () => {
    const cpf = cpfInput.value.replace(/\D/g, ''); 
    const cpfIsValid = validarCPF(cpf);
  
    const errorLabel = document.querySelector('.form__label--error');
    if (errorLabel) {
      errorLabel.remove();
    }
  
    if (!cpfIsValid) {
      const errorElement = document.createElement('span');
      errorElement.innerHTML = 'CPF inválido!';
      errorElement.style.color = 'red';
      errorElement.classList.add('form__label--error');
      cpfLabel.parentNode.insertBefore(errorElement, cpfLabel.nextSibling);
    }
  });
  
  function validarCPF(cpf) {
    if (cpf.length !== 11) {
      return false;
    }
  
    const cpfRegex = /^([0-9]{3}\.?[0-9]{3}\.?[0-9]{3}\-?[0-9]{2})$/;
  
    if (!cpfRegex.test(cpf)) {
      return false;
    }
  
    const cpfNumbers = cpf.replace(/\D/g, '').split('').map(Number);
    const [a, b, c, d, e, f, g, h, i, j, k] = cpfNumbers;
  
    const sum1 = a * 10 + b * 9 + c * 8 + d * 7 + e * 6 + f * 5 + g * 4 + h * 3 + i * 2;
    const digit1 = (sum1 * 10) % 11;
  
    if (digit1 !== j) {
      return false;
    }
  
    const sum2 = a * 11 + b * 10 + c * 9 + d * 8 + e * 7 + f * 6 + g * 5 + h * 4 + i * 3 + j * 2;
    const digit2 = (sum2 * 10) % 11;
  
    if (digit2 !== k) {
      return false;
    }
  
    return true;
  }
  </script>

</body>
</html>